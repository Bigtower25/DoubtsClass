-- MySQL Script generated by MySQL Workbench
-- 07/10/15 19:42:26
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema aplicacionesweb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `aplicacionesweb` ;

-- -----------------------------------------------------
-- Schema aplicacionesweb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `aplicacionesweb` DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci ;
USE `aplicacionesweb` ;

-- -----------------------------------------------------
-- Table `aplicacionesweb`.`Usuario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `aplicacionesweb`.`Usuario` ;

CREATE TABLE IF NOT EXISTS `aplicacionesweb`.`Usuario` (
  `idUsuario` VARCHAR(45) NOT NULL,
  `Nombre` VARCHAR(45) NOT NULL,
  `Apellido_1` VARCHAR(45) NOT NULL,
  `Apellido_2` VARCHAR(45) NULL,
  `Password` VARCHAR(45) NOT NULL,
  `Localizacion` VARCHAR(45) NULL,
  `Email` VARCHAR(45) NULL,
  `Privilegio` INT NOT NULL DEFAULT 0,
  `Bio` TEXT(500) NULL,
  PRIMARY KEY (`idUsuario`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `aplicacionesweb`.`Pregunta`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `aplicacionesweb`.`Pregunta` ;

CREATE TABLE IF NOT EXISTS `aplicacionesweb`.`Pregunta` (
  `Titulo` VARCHAR(45) NOT NULL,
  `Votos` INT NOT NULL DEFAULT 0,
  `Descripcion` TEXT NOT NULL,
  `Usuario_idUsuario` VARCHAR(45) NOT NULL,
  `Hora` TIMESTAMP NULL,
  `idPregunta` INT NOT NULL AUTO_INCREMENT,
  INDEX `fk_Pregunta_Usuario1_idx` (`Usuario_idUsuario` ASC),
  PRIMARY KEY (`idPregunta`),
  CONSTRAINT `fk_Pregunta_Usuario1`
    FOREIGN KEY (`Usuario_idUsuario`)
    REFERENCES `aplicacionesweb`.`Usuario` (`idUsuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `aplicacionesweb`.`Documento`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `aplicacionesweb`.`Documento` ;

CREATE TABLE IF NOT EXISTS `aplicacionesweb`.`Documento` (
  `idDocumento` INT NOT NULL,
  `Nombre_del_Documento` VARCHAR(45) NOT NULL,
  `Link_del_Documento` TINYTEXT NOT NULL,
  `Descripcion` INT NOT NULL,
  `Usuario_idUsuario` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idDocumento`, `Usuario_idUsuario`),
  INDEX `fk_Documento_Usuario1_idx` (`Usuario_idUsuario` ASC),
  CONSTRAINT `fk_Documento_Usuario1`
    FOREIGN KEY (`Usuario_idUsuario`)
    REFERENCES `aplicacionesweb`.`Usuario` (`idUsuario`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `aplicacionesweb`.`Respuesta`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `aplicacionesweb`.`Respuesta` ;

CREATE TABLE IF NOT EXISTS `aplicacionesweb`.`Respuesta` (
  `idRespuesta` INT NOT NULL,
  `idUsuario` VARCHAR(45) NOT NULL,
  `Votos` INT NOT NULL DEFAULT 0,
  `Descripcion` TEXT NOT NULL,
  `Pregunta_idPregunta` INT NOT NULL,
  `Hora` TIMESTAMP NULL,
  PRIMARY KEY (`idRespuesta`),
  INDEX `Usuario_idUsuario_idx` (`idUsuario` ASC),
  INDEX `fk_Respuesta_Pregunta1_idx` (`Pregunta_idPregunta` ASC),
  CONSTRAINT `Usuario_idUsuario`
    FOREIGN KEY (`idUsuario`)
    REFERENCES `aplicacionesweb`.`Usuario` (`idUsuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Respuesta_Pregunta1`
    FOREIGN KEY (`Pregunta_idPregunta`)
    REFERENCES `aplicacionesweb`.`Pregunta` (`idPregunta`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `aplicacionesweb`.`Etiqueta`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `aplicacionesweb`.`Etiqueta` ;

CREATE TABLE IF NOT EXISTS `aplicacionesweb`.`Etiqueta` (
  `Nombre` VARCHAR(45) NOT NULL,
  `Descripcion` MEDIUMTEXT NULL,
  PRIMARY KEY (`Nombre`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `aplicacionesweb`.`Preferencias`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `aplicacionesweb`.`Preferencias` ;

CREATE TABLE IF NOT EXISTS `aplicacionesweb`.`Preferencias` (
  `Usuario_idUsuario` VARCHAR(45) NOT NULL,
  `foto` INT NOT NULL DEFAULT 0,
  `email` INT NOT NULL DEFAULT 0,
  `nombre` INT NOT NULL DEFAULT 0,
  PRIMARY KEY (`Usuario_idUsuario`),
  CONSTRAINT `fk_Preferencias_Usuario1`
    FOREIGN KEY (`Usuario_idUsuario`)
    REFERENCES `aplicacionesweb`.`Usuario` (`idUsuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `aplicacionesweb`.`Pregunta_has_Etiqueta`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `aplicacionesweb`.`Pregunta_has_Etiqueta` ;

CREATE TABLE IF NOT EXISTS `aplicacionesweb`.`Pregunta_has_Etiqueta` (
  `Pregunta_idPregunta` INT NOT NULL,
  `Etiqueta_Nombre` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`Pregunta_idPregunta`, `Etiqueta_Nombre`),
  INDEX `fk_Pregunta_has_Etiqueta_Etiqueta1_idx` (`Etiqueta_Nombre` ASC),
  INDEX `fk_Pregunta_has_Etiqueta_Pregunta1_idx` (`Pregunta_idPregunta` ASC),
  CONSTRAINT `fk_Pregunta_has_Etiqueta_Pregunta1`
    FOREIGN KEY (`Pregunta_idPregunta`)
    REFERENCES `aplicacionesweb`.`Pregunta` (`idPregunta`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Pregunta_has_Etiqueta_Etiqueta1`
    FOREIGN KEY (`Etiqueta_Nombre`)
    REFERENCES `aplicacionesweb`.`Etiqueta` (`Nombre`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `aplicacionesweb`.`Usuario`
-- -----------------------------------------------------
START TRANSACTION;
USE `aplicacionesweb`;
INSERT INTO `aplicacionesweb`.`Usuario` (`idUsuario`, `Nombre`, `Apellido_1`, `Apellido_2`, `Password`, `Localizacion`, `Email`, `Privilegio`, `Bio`) VALUES ('asoler23', 'Angel', 'Soler', 'Ruiz', '123456', 'Madrid', 'angelsoler91@gmail.com', 0, NULL);
INSERT INTO `aplicacionesweb`.`Usuario` (`idUsuario`, `Nombre`, `Apellido_1`, `Apellido_2`, `Password`, `Localizacion`, `Email`, `Privilegio`, `Bio`) VALUES ('admin', 'Toni', 'Torregrosa', 'Povedano', '1234', 'Madrid', 'dc.admin@gmail.com', 1, NULL);
INSERT INTO `aplicacionesweb`.`Usuario` (`idUsuario`, `Nombre`, `Apellido_1`, `Apellido_2`, `Password`, `Localizacion`, `Email`, `Privilegio`, `Bio`) VALUES ('prueba', 'Marcos', 'Prueba', 'Prueba', 'prueba', 'Barcelona', 'prueba.prueba@prueba.com', 0, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `aplicacionesweb`.`Pregunta`
-- -----------------------------------------------------
START TRANSACTION;
USE `aplicacionesweb`;
INSERT INTO `aplicacionesweb`.`Pregunta` (`Titulo`, `Votos`, `Descripcion`, `Usuario_idUsuario`, `Hora`, `idPregunta`) VALUES ('Que es una integral?', 0, 'Necesito ayuda con integrales.', 'asoler23', '00:00', 2);
INSERT INTO `aplicacionesweb`.`Pregunta` (`Titulo`, `Votos`, `Descripcion`, `Usuario_idUsuario`, `Hora`, `idPregunta`) VALUES ('Que es una matriz?', 2, 'Pues no se lo que es una matriz', 'prueba', '00:00', 1);
INSERT INTO `aplicacionesweb`.`Pregunta` (`Titulo`, `Votos`, `Descripcion`, `Usuario_idUsuario`, `Hora`, `idPregunta`) VALUES ('Como definir variables en JAVA', 5, 'Como defino variables en el lengiaje de programación java.', 'prueba', NULL, 3);

COMMIT;


-- -----------------------------------------------------
-- Data for table `aplicacionesweb`.`Respuesta`
-- -----------------------------------------------------
START TRANSACTION;
USE `aplicacionesweb`;
INSERT INTO `aplicacionesweb`.`Respuesta` (`idRespuesta`, `idUsuario`, `Votos`, `Descripcion`, `Pregunta_idPregunta`, `Hora`) VALUES (1, 'prueba', 1, 'Pues la solucion es...', 1, NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `aplicacionesweb`.`Etiqueta`
-- -----------------------------------------------------
START TRANSACTION;
USE `aplicacionesweb`;
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Matematicas', 'Esto es una pequeña descripción');
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Lengua', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Programacion', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Sociales', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Tecnologia', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('ESO', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Primaria', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Bachillerato', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Universidad', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Web Design', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Java', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('C', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Aeronautica', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Antropologia', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Arqueologia', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Arquitectura', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Astronomia', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Biblioteconomia', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Biologia', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Botanica', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Economia', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Derecho', NULL);
INSERT INTO `aplicacionesweb`.`Etiqueta` (`Nombre`, `Descripcion`) VALUES ('Medicina', NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `aplicacionesweb`.`Preferencias`
-- -----------------------------------------------------
START TRANSACTION;
USE `aplicacionesweb`;
INSERT INTO `aplicacionesweb`.`Preferencias` (`Usuario_idUsuario`, `foto`, `email`, `nombre`) VALUES ('asoler23', 0, 0, 0);
INSERT INTO `aplicacionesweb`.`Preferencias` (`Usuario_idUsuario`, `foto`, `email`, `nombre`) VALUES ('admin', 0, 0, 0);
INSERT INTO `aplicacionesweb`.`Preferencias` (`Usuario_idUsuario`, `foto`, `email`, `nombre`) VALUES ('prueba', 0, 0, 0);

COMMIT;


-- -----------------------------------------------------
-- Data for table `aplicacionesweb`.`Pregunta_has_Etiqueta`
-- -----------------------------------------------------
START TRANSACTION;
USE `aplicacionesweb`;
INSERT INTO `aplicacionesweb`.`Pregunta_has_Etiqueta` (`Pregunta_idPregunta`, `Etiqueta_Nombre`) VALUES (1, 'Matematicas');
INSERT INTO `aplicacionesweb`.`Pregunta_has_Etiqueta` (`Pregunta_idPregunta`, `Etiqueta_Nombre`) VALUES (2, 'Matematicas');
INSERT INTO `aplicacionesweb`.`Pregunta_has_Etiqueta` (`Pregunta_idPregunta`, `Etiqueta_Nombre`) VALUES (3, 'Java');
INSERT INTO `aplicacionesweb`.`Pregunta_has_Etiqueta` (`Pregunta_idPregunta`, `Etiqueta_Nombre`) VALUES (3, 'Programacion');

COMMIT;

